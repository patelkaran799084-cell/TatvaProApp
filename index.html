<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Tatva OS Pro</title>
  <link rel="manifest" href="manifest.json" />
  <meta name="theme-color" content="#263646" />
  <link rel="stylesheet" href="style.css" />
</head>

<body>
  <!-- TOP BAR -->
  <div class="topbar">
    <div class="brand">
      <span class="dot"></span>
      <span class="title">Tatva OS Pro</span>
    </div>

    <div class="actions">
      <button class="btn-top" onclick="openTeamMgr()">üë• Team</button>

      <!-- ‚úÖ GOOGLE DRIVE BUTTONS -->
      <button class="btn-top" onclick="driveLogin()">üîê Drive Login</button>
      <button class="btn-top" onclick="backupToDrive(collectAppBackupData())">‚òÅ Backup</button>
      <button class="btn-top" onclick="restoreFromDrive()">‚òÅ Restore</button>

      <!-- ‚úÖ LOCAL SAVE/LOAD -->
      <button class="btn-top" onclick="backupData()">‚¨á Save</button>
      <label class="btn-top" style="cursor:pointer;">
        ‚¨Ü Load
        <input type="file" id="restore-file" accept=".json" style="display:none"
               onchange="restoreData(this)" />
      </label>
    </div>
  </div>

  <!-- ‚úÖ DRIVE STATUS -->
  <div id="driveStatus" style="font-size:12px;color:#ddd;margin:6px 14px;">
    Drive: Not connected
  </div>

  <!-- DASHBOARD -->
  <div class="container">
    <div class="stats">
      <div class="stat-card"><div id="st-orders">0</div><small>Orders</small></div>
      <div class="stat-card"><div id="st-profit">‚Çπ0</div><small>Net Profit</small></div>
      <div class="stat-card"><div id="st-rev">‚Çπ0</div><small>Revenue</small></div>
      <div class="stat-card"><div id="st-hand">‚Çπ0</div><small>Cash Hand</small></div>
    </div>

    <h3 class="section-title">RECENT ORDERS</h3>
    <div id="orders-list"></div>
  </div>

  <!-- FLOATING + BUTTON -->
  <button class="fab" onclick="openNewOrder()">+</button>

  <!-- NEW ORDER MODAL -->
  <div id="modal-new" class="modal">
    <div class="modal-box">
      <h3>New Order</h3>
      <input id="new-client" placeholder="Client Name" />
      <input id="new-work" placeholder="Work Details" />
      <input id="new-price" type="number" placeholder="Price" />
      <input id="new-date" type="date" />
      <div class="row">
        <button class="btn btn-blue" onclick="createOrder()">Create</button>
        <button class="btn" onclick="closeModal('modal-new')">Cancel</button>
      </div>
    </div>
  </div>

  <!-- DETAIL MODAL -->
  <div id="modal-detail" class="modal">
    <div class="modal-box big">
      <div class="detail-head">
        <div>
          <h3 id="d-client">Client</h3>
          <div id="d-work" style="font-size:13px;color:#666;"></div>
          <div id="d-date" style="font-size:12px;color:#999;"></div>
        </div>
        <button class="btn btn-red btn-sm" onclick="deleteOrder()">Delete</button>
      </div>

      <div class="strip">
        <div><small>Received</small><b id="d-recd">‚Çπ0</b></div>
        <div><small>Paid Out</small><b id="d-paid">‚Çπ0</b></div>
        <div><small>Cash Hand</small><b id="d-hand">‚Çπ0</b></div>
      </div>

      <div id="d-pending" class="pending"></div>

      <h4>Income</h4>
      <div class="row-inputs">
        <input id="pay-in-amt" type="number" placeholder="Amount" />
        <button class="btn btn-blue btn-sm" onclick="addIncome()">Add</button>
      </div>
      <div id="list-income"></div>

      <h4>Expenses / Tasks</h4>
      <div class="row-inputs">
        <select id="task-type">
          <option value="Photo">Photo</option>
          <option value="Video">Video</option>
          <option value="Design">Design</option>
          <option value="Other">Other</option>
        </select>
        <select id="task-artist"></select>
        <input id="task-cost" type="number" placeholder="Cost" />
        <button class="btn btn-blue btn-sm" onclick="addTask()">Add</button>
      </div>
      <div id="list-tasks"></div>

      <div class="row">
        <button class="btn btn-green" onclick="markDone()">Auto Settle</button>
        <button class="btn" onclick="closeModal('modal-detail')">Close</button>
      </div>
    </div>
  </div>

  <!-- TEAM MODAL -->
  <div id="overlay-team" class="overlay" style="display:none;">
    <div class="modal-box">
      <h3>Team</h3>
      <div id="list-team"></div>
      <div class="row-inputs">
        <input id="team-new" placeholder="New Member" />
        <button class="btn btn-blue btn-sm" onclick="addTeam()">Add</button>
      </div>
      <div class="row">
        <button class="btn" onclick="document.getElementById('overlay-team').style.display='none'">Close</button>
      </div>
    </div>
  </div>

  <!-- ‚úÖ IMPORTANT: scripts order -->
  <script src="app.js"></script>
  <script src="gdrive.js"></script>
</body>
</html>
